<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Introducing Ruby to ActionScripters</title>
  <link rel="stylesheet" type="text/css" href="/css/reset-min.css" media="all" />
  <link rel="stylesheet" type="text/css" href="/css/pygments.css" media="all" />
  <link rel="stylesheet" type="text/css" href="/css/sprouts.css" media="all" />
  <script src="/javascripts/jquery-min-1.4.4.js"></script>
  <script src="/javascripts/sprouts.js"></script>
</head>
<body>
  <div id="header">
    <div class="center">
      <div class="content header-shadow">
        <div class="logo"><a href="/">Sprouts</a></div>
        <div class="tagline">Software development&mdash;evolved</div>
      </div>
    </div>
  </div>

  <a href="http://github.com/lukebayes/project-sprouts/tree/master"><img style="position: absolute; top: 300; right: 0; border: 0;" src="/images/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>

<div class="center">
  <div class="post-content content header-shadow">
    <h1>Introducing Ruby to ActionScripters</h1>
<p>20 Jan 2011 &#8211; Luke Bayes</p>
<div id="quotes">
  <blockquote>Ruby is a dynamic, open source programming language with a focus on simplicity and productivity. It has an elegant syntax that is natural to read and easy to write.</blockquote>
  <div class="attribution"> <a href="http://ruby-lang.org">Ruby Website</a> </div>
</div>
<p>This means that Ruby has opinions, and many of Ruby&#8217;s opinions are exactly inverted from what you may have grown to love in ActionScript. There was a time when this made me uncomfortable, and I&#8217;m sure it will make some of you uncomfortable. Well, not <em>you</em> of course, but maybe someone you know&#8230;</p>
<p>If you&#8217;re perfectly content with massive, repetitive build scripts, manually keeping build environments consistent, and your current workflow, please stop reading now. Sprouts is probably <strong>not</strong> for you.</p>
<p>For the rest of you that aren&#8217;t familiar with Ruby and the build system Rake, I&#8217;m about to do my very best to provide a gentle introduction, and when we&#8217;re done, I hope you&#8217;ll be comfortable at least reading, and hopefully, editing Rakefiles with confidence.</p>
<p><span class="attribution"><br />
<image class="bordered" src="/images/2895452690_911065b1f3_z.jpg" title="Ruby Pomegranate Seeds" /><br />
<a href="http://www.flickr.com/photos/greencolander/2895452690">Ruby Pomegranate Seeds</a> courtesy of <a href="http://www.flickr.com/photos/greencolander/">Greencolander</a> and the <a href="http://creativecommons.org/licenses/by/2.0/">Creative Commons</a> license.<br />
</span></p>
<h1>Quack like a what?</h1>
<p>Ruby is a dynamic language, which means that a variable can be essentially any concrete data type. The important thing is that an object define the methods and attributes that its clients attempt to access. This paradigm is often referred to as <a target="_blank" href="http://en.wikipedia.org/wiki/Duck_typing">Duck Typing</a>.</p>
<p>When it&#8217;s unfamiliar, Ruby syntax has a few rules that can trip you up, so I&#8217;ll kick this off by reviewing some key features of the language.</p>
<p>I&#8217;m going to do my best to give you the basics of Ruby here, but you should definitely make time to read <a target="_blank" href="http://mislav.uniqpath.com/poignant-guide/">Why&#8217;s Poignant Guide to Ruby</a>.</p>
<h2>Trying Ruby</h2>
<p>If you have installed Ruby and gotten it into your system path, you can kick off a <a target="_blank" href="http://en.wikipedia.org/wiki/Read-eval-print_loop">Read Eval Print Loop (<span class="caps">REPL</span>)</a> by typing:</p>
<div class="highlight"><pre><code class="bash">irb
</code></pre>
</div><p><em>(Type &#8216;quit&#8217; and hit enter to leave the <span class="caps">REPL</span>)</em></p>
<p>The <code>puts</code> method will send a String value to stdout and you can think of this like ActionScript&#8217;s <code>trace</code> method.</p>
<div class="highlight"><pre><code class="ruby"><span class="nb">puts</span> <span class="s2">&quot;Hello World&quot;</span>
</code></pre>
</div><p>Try running irb and then <code>puts</code> some messages now.</p>
<p>When using irb, you can do the following to try out Sprout features.</p>
<div class="highlight"><pre><code class="ruby"><span class="nb">require</span> <span class="s1">&#39;rubygems&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;sprout&#39;</span>

<span class="c1"># do something here...</span>
</code></pre>
</div><h2>Strings</h2>
<p>There are a handful of different ways to declare Strings in Ruby, but the main thing I&#8217;d like to highlight here is the difference between single quotes and double quotes.</p>
<p>A String that is defined within single quotes will contain literally whatever is defined within the quotes. This means that backslashes will not be rendered as escape sequences, they will literally just be backslashes.</p>
<p>Single quotes require less overhead from the Ruby interpreter and are therefore preferred. I usually use single quotes wherever I don&#8217;t need an evaluated expression or escape sequence.</p>
<div class="highlight"><pre><code class="ruby"><span class="nb">puts</span> <span class="s1">&#39;Hello World&#39;</span>
</code></pre>
</div><p>A String that is defined within double quotes will be interpreted for embedded Ruby expressions and escape sequences will be resolved so that they are replaced with the character literal that they represent.</p>
<div class="highlight"><pre><code class="ruby"><span class="n">suffix</span> <span class="o">=</span> <span class="s2">&quot;World!</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="n">str</span> <span class="o">=</span> <span class="s2">&quot;Hello </span><span class="si">#{</span><span class="n">suffix</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre>
</div><p>If you&#8217;re coming from ActionScript, you&#8217;ll probably be tempted to concatenate Strings with expressions like:</p>
<div class="highlight"><pre><code class="ruby"><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;aaa&#39;</span>
<span class="n">b</span> <span class="o">=</span> <span class="s1">&#39;bbb&#39;</span>
<span class="nb">puts</span> <span class="s1">&#39;a: &#39;</span> <span class="o">+</span> <span class="n">a</span> <span class="o">+</span> <span class="s1">&#39; b: &#39;</span> <span class="o">+</span> <span class="n">b</span>
</code></pre>
</div><p>While this will usually work, it will explode if the expression values are nil. The preferred way to assemble Strings and expression values (especially for debugging), is to use double quotes and Ruby expression syntax like:</p>
<div class="highlight"><pre><code class="ruby"><span class="nb">puts</span> <span class="s2">&quot;a: </span><span class="si">#{</span><span class="n">a</span><span class="si">}</span><span class="s2"> b: </span><span class="si">#{</span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre>
</div><p>This will insert an empty String for values that are nil.</p>
<h2>Symbols</h2>
<p>Ruby has an interesting primitive called a <code>Symbol</code>. Symbols are not Strings, but are often used in places where a String might also suffice. There are some differences between Symbols and Strings and the first one is that Symbols are more memory efficient than Strings. The key difference (for me at least) is that Symbols have rules about what characters are acceptable that don&#8217;t apply to String values. The rules for what can and can&#8217;t be used in a Symbol name are essentially the same rules for what can and can&#8217;t be used for a Ruby method name. You can transform a String to a Symbol with the <code>to_sym</code> method, and you can transform a Symbol to a String with the <code>to_s</code> method.</p>
<p>A Symbol is defined (or referenced) in Ruby with a leading colon as follows:</p>
<div class="highlight"><pre><code class="ruby"><span class="nb">name</span> <span class="o">=</span> <span class="ss">:beaker</span>
</code></pre>
</div><p>Symbols are most often used in Ruby as Hash keys, when referring to methods, and wherever a descriptive name is desirable, but all the functionality of a String is not required.</p>
<p>Symbols are a tricky part of Ruby and it&#8217;s important when working with Rake files to understand when a Symbol is appropriate and when it is not. In Rake, a Symbol is often used for a Rake task name, <em>unless</em> that task refers to a file, then a String must be used. This is because Symbols cannot include slashes, dots or other important components of a File name.</p>
<p><a target="_blank" target="http://glu.ttono.us/articles/2005/08/19/understanding-ruby-symbols">More information on Symbols</a></p>
<h2>Parentheses</h2>
<p>The parentheses that surround parameters in a Ruby method declaration (and method calls) are <em>optional</em>, and by convention, are only used when they are required for the parser to work properly.</p>
<p>This does take some time to get used to, but it leads to some interesting improvements in readability. Generally, when I find myself adding parentheses to a statement, this is a (very mild) <a href="http://martinfowler.com/bliki/CodeSmell.html">smell</a> that I might be doing too much in one line.</p>
<p>Following are some examples to help you understand this issue.</p>
<p>This method in ActionScript:</p>
<div class="highlight"><pre><code class="javascript"><span class="kr">public</span> <span class="kd">function</span> <span class="nx">foo</span><span class="p">(</span><span class="nx">a</span><span class="o">:</span><span class="nb">String</span><span class="p">,</span> <span class="nx">b</span><span class="o">:</span><span class="nb">String</span><span class="p">)</span><span class="o">:</span><span class="k">void</span> <span class="p">{</span>
  <span class="nx">trace</span><span class="p">(</span><span class="s2">&quot;a: &quot;</span> <span class="o">+</span> <span class="nx">a</span> <span class="o">+</span> <span class="s2">&quot; b: &quot;</span> <span class="o">+</span> <span class="nx">b</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div><p>Would be defined like this in Ruby:</p>
<div class="highlight"><pre><code class="ruby"><span class="k">def</span> <span class="nf">foo</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>
  <span class="nb">puts</span> <span class="s2">&quot;a </span><span class="si">#{</span><span class="n">a</span><span class="si">}</span><span class="s2">, b </span><span class="si">#{</span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">end</span>
</code></pre>
</div><p>But may also be written like this:</p>
<div class="highlight"><pre><code class="ruby"><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">&quot;a </span><span class="si">#{</span><span class="n">a</span><span class="si">}</span><span class="s2">, b </span><span class="si">#{</span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">end</span>
</code></pre>
</div><p>Additionally, to call that method in ActionScript you might:</p>
<div class="highlight"><pre><code class="ruby"><span class="n">foo</span><span class="p">(</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;baz&quot;</span><span class="p">);</span>
</code></pre>
</div><p>But in Ruby:</p>
<div class="highlight"><pre><code class="ruby"><span class="n">foo</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;baz&quot;</span>
</code></pre>
</div><p>Of course, the following is also valid Ruby:</p>
<div class="highlight"><pre><code class="ruby"><span class="n">foo</span><span class="p">(</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;baz&quot;</span><span class="p">)</span>
</code></pre>
</div><p>You may be wondering, &#8220;When <em>should</em> I add the parens?&#8221; at this point. Here is a reasonable example of an expression that needs parens:</p>
<div class="highlight"><pre><code class="ruby"><span class="n">assert</span> <span class="n">foo</span><span class="p">(</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;baz&quot;</span><span class="p">)</span>
</code></pre>
</div><p>This expression is calling the imaginary <code>foo</code> method, sending it two arguments, <code>bar</code> and <code>baz</code>, then it&#8217;s sending the return value of that method call to the <code>assert</code> method.</p>
<p>Even though the interpreter can figure out what&#8217;s going on here, it&#8217;s much more readable to parenthesize nested expressions like this.</p>
<h2>Return values</h2>
<p>You should also know that Ruby methods always return a value, whether you use the <code>return</code> keyword or not. The last expression that is evaluated within a Ruby method is what is returned. This can of course, be nil.</p>
<h2>Hash Rockets</h2>
<p>Ruby Hashes are <em>(<a target="_blank" href="http://blog.peepcode.com/tutorials/2011/rip-ruby-hash-rocket-syntax">historically</a>)</em> delimited by a &#8220;Hash Rocket&#8221;, this is an equal sign, followed by a greater than sign, like:</p>
<div class="highlight"><pre><code class="ruby"><span class="o">=&gt;</span>
</code></pre>
</div><p>To show what I mean, the following ActionScript Hash:</p>
<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">hash</span><span class="o">:</span><span class="nb">Object</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">a</span><span class="o">:</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="nx">b</span><span class="o">:</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="nx">c</span><span class="o">:</span> <span class="s1">&#39;c&#39;</span> <span class="p">};</span>
</code></pre>
</div><p>Could be written in Ruby like this:</p>
<div class="highlight"><pre><code class="ruby"><span class="nb">hash</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">:a</span> <span class="o">=&gt;</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="ss">:b</span> <span class="o">=&gt;</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="ss">:c</span> <span class="o">=&gt;</span> <span class="s1">&#39;c&#39;</span> <span class="p">}</span>
</code></pre>
</div><p>Even thought the Hash Rocket is no longer required in Ruby 1.9.x, Sprouts is still using it for the time being. We&#8217;ll likely update to the new syntax at some point in the future.</p>
<h2>Hash Brackets</h2>
<p>You should also note that, like parentheses on methods, curly brackets around Hashes are optional, so the previous Hash would normally be declared like:</p>
<div class="highlight"><pre><code class="ruby"><span class="nb">hash</span> <span class="o">=</span> <span class="ss">:a</span> <span class="o">=&gt;</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="ss">:b</span> <span class="o">=&gt;</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="ss">:c</span> <span class="o">=&gt;</span> <span class="s1">&#39;c&#39;</span>
</code></pre>
</div><p>Notice how the Ruby Hash prefixes the Hash keys with a colon. This indicates that we&#8217;re using Symbols as keys.</p>
<h1>Rake</h1>
<p>Rake is the library for creating and running build scripts using Ruby. I&#8217;m going to do my best to introduce some of the most basic features here, but you should definitely stop now and read <a target="_blank" href="http://martinfowler.com/articles/rake.html">Martin Fowler&#8217;s seminal Rake article</a> on the subject.</p>
<h2>Tasks</h2>
<p>Rake tasks are exposed in a Rake file as a simple Ruby method. You can create a new Rake task by calling the <code>task</code> method and providing a task name as follows:</p>
<div class="highlight"><pre><code class="ruby"><span class="n">task</span> <span class="ss">:my_task</span>
</code></pre>
</div><p>This task isn&#8217;t very exciting and won&#8217;t do much at all when invoked. Before we get too deep here, I&#8217;d like to talk about that name argument. That argument can be a Symbol a String or a Hash, let&#8217;s dig into when and why it might be each of these.</p>
<h3>Symbol Names</h3>
<p>Rake tasks that don&#8217;t directly result in the creation of a file on disk are usually named with Symbols. If you <strong>can</strong> name your task with a Symbol, you usually should.</p>
<div class="highlight"><pre><code class="ruby"><span class="n">task</span> <span class="ss">:my_task</span>
</code></pre>
</div><h3>String Names</h3>
<p>Rake file tasks are named with a String. This is because the rules for Symbols cannot accomodate the requirements of file names. Rake tasks that need to be named with special characters for whatever reason are also named with Strings.</p>
<div class="highlight"><pre><code class="ruby"><span class="n">file</span> <span class="s1">&#39;bin/SomeFile.xml&#39;</span>
</code></pre>
</div><h3>Hash Names</h3>
<p>Rake tasks can be declared with a Hash if they depend on other tasks. The idea here is that the Hash has a single key/value pair, and the key is either a String or Symbol that is the name of the current task, and the value is a String, a Symbol or an Array (of Strings and/or Symbols) and defines which tasks must be invoked <strong>before</strong> this one.</p>
<p>If that doesn&#8217;t make sense, please read it a few more times. Understanding this complexity is really the crux of understanding Rake and being able to edit your Sprout Rake files.</p>
<p>Let&#8217;s dig into a few examples.</p>
<p>The following is a very simple Rake task that depends on another very simple Rake task:</p>
<div class="highlight"><pre><code class="ruby"><span class="n">task</span> <span class="ss">:my_task</span> <span class="o">=&gt;</span> <span class="ss">:other_task</span>
</code></pre>
</div><p>And here is one that depends on two other simple tasks:</p>
<div class="highlight"><pre><code class="ruby"><span class="n">task</span> <span class="ss">:my_task</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:first_other_task</span><span class="p">,</span> <span class="ss">:second_other_task</span><span class="o">]</span>
</code></pre>
</div><p>Noice how the hash rocket delimits the difference between the task name and it&#8217;s value. Notice how we added the square brackets around the Array.</p>
<h2>Conclusion</h2>
<p>This brings us to the end of the &#8220;Introducing Ruby to ActionScripters&#8221; post. If you find anything here in error, <a target="_blank" href="http://groups.google.com/group/projectsprouts">please let us know</a>, or better yet &#8211; <a target="_blank" href="https://github.com/lukebayes/project-sprouts/blob/gh-pages/_source/_posts">fork</a>, fix and send a pull request.</p>
  </div>
</div>

<div class="center even-section">
  <div class="content header-shadow">

    <div id="disqus_thread"></div>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

  </div>
</div>


  <div id="footer">
    <div class="center">
      <div class="content header-shadow">

        <table>

          <tr>
            <td>

              <ul>
                <li class="header">Details</li>
                <li class="home"><a href="/">Home</a></li>
                <li class="troubleshooting"><a href="/troubleshooting.html">Troubleshooting</a></li>
                <li class="migrating"><a href="/2010/12/29/migrating.html">Migration Guide</a></li>

                <li class="current-docs"><a href="/docs/1.1/frames.html">Docs (1.1 &mdash; Frames)</a></li>
                <li><a href="/docs/1.1/index.html">Docs (1.1 &mdash; No Frames)</a></li>

                <li class="legacy-docs"><a href="/rdoc/index.html">Legacy Docs (0.7)</a></li>
                <li class="legacy-site"><a href="/legacy/index.html">Legacy Site (0.7)</a></li>
              </ul>

            </td>
            <td>

              <ul>
                <li class="header">Blog <a href="/atom.xml"><img class="footer-feed-icon" src="/images/35px-Feed-icon.png" /></a></li>
                
                <li class="post"><a href="/2011/01/20/introduction-to-ruby.html"><span class="date">2011-01-20</span> | Introducing Ruby to ActionScripters</a></li>
                
                <li class="post"><a href="/2011/01/19/using-fdb.html"><span class="date">2011-01-19</span> | Using the Flex DeBugger (FDB)</a></li>
                
                <li class="post"><a href="/2011/01/18/using-fcsh.html"><span class="date">2011-01-18</span> | Using the Flex Compiler SHell (FCSH)</a></li>
                
                <li class="post"><a href="/2010/12/31/using-generators.html"><span class="date">2010-12-31</span> | Using Sprout Generators</a></li>
                
                <li class="post"><a href="/2010/12/29/migrating.html"><span class="date">2010-12-29</span> | Migrating from 0.7 to 1.0 beta</a></li>
                
                <li class="post"><a href="/2010/12/28/version-1.0-announced.html"><span class="date">2010-12-28</span> | Project Sprouts Version 1.0 Beta Released!</a></li>
                
              </ul>

            </td>
            <td>

              <ul>
                <li class="header">Do It</li>
                <li><a target="_blank" href="http://groups.google.com/group/projectsprouts">Contact</a> (Google Groups)</li>
                <li><a target="_blank" href="https://github.com/lukebayes/project-sprouts/tree/master">Source Code</a> (Github)</li>
                <li><a target="_blank" href="https://github.com/lukebayes/project-sprouts/issues">File an Issue</a> (Github)</li>
                <li><a target="_blank" href="http://rubygems.org/gems/sprout">Download</a> (RubyGems)</li>
                <li><a target="_blank" href="http://projectsprouts.org/docs/1.1/frames.html">Documentation</a> 
                (<a target="_blank" href="http://projectsprouts.org/docs/1.1/index.html">No Frames</a>)</li>
              </ul>

            </td>

          </tr>

        </table>

      </div>
    </div>
  </div>
</body>

<!-- Google Analytics for projectsprouts.org -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1619511-4");
pageTracker._initData();
pageTracker._trackPageview();
</script>


<!-- Disquss -->
<script type="text/javascript">
    //var disqus_developer = 1;
    var disqus_shortname = 'projectsprouts';
    var disqus_title     = 'Introducing Ruby to ActionScripters'
    var disqus_url       = 'http://projectsprouts.org/2011/01/20/introduction-to-ruby.html';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>


</html>

