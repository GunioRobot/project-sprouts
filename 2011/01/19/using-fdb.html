<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Using the Flex DeBugger (FDB)</title>
  <link rel="stylesheet" type="text/css" href="/css/reset-min.css" media="all" />
  <link rel="stylesheet" type="text/css" href="/css/pygments.css" media="all" />
  <link rel="stylesheet" type="text/css" href="/css/sprouts.css" media="all" />
  <script src="/javascripts/jquery-min-1.4.4.js"></script>
  <script src="/javascripts/sprouts.js"></script>
</head>
<body>
  <div id="header">
    <div class="center">
      <div class="content header-shadow">
        <div class="logo"><a href="/">Sprouts</a></div>
        <div class="tagline">Software development&mdash;evolved</div>
      </div>
    </div>
  </div>

  <a href="http://github.com/lukebayes/project-sprouts/tree/master"><img style="position: absolute; top: 300; right: 0; border: 0;" src="/images/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>

<div class="center">
  <div class="post-content content header-shadow">
    <h1>Using the Flex DeBugger (<span class="caps">FDB</span>)</h1>
<p>19 Jan 2011 &#8211; Luke Bayes</p>
<h2>Debug what?</h2>
<p><span class="caps">FDB</span> is a command line debugger. It provides us with the ability to capture, introspect and control the execution flow of a running <span class="caps">SWF</span> file by connecting to the Debug Flash Player and exposing a variety of actions to its user. In order to use <span class="caps">FDB</span>, we need to first build a <span class="caps">SWF</span> file with the <code>debug</code> flag set to <code>true</code>, and secondly, we need to run that <span class="caps">SWF</span> within a debug Flash Player.</p>
<p>It just so happens that Sprouts downloads, installs and executes a debug Flash Player for whatever operating system you&#8217;re on.</p>
<p>As you&#8217;ll soon see, we also make it incredibly simple to drop into a debug session with any <span class="caps">SWF</span> file that you build with Sprouts.</p>
<p>To complete this tutorial, you&#8217;ll need the following RubyGems installed:</p>
<ul>
	<li><code>flashsdk</code> &gt;= 1.0.20.pre</li>
	<li><code>sprout</code> &gt;= 1.1.10.pre</li>
</ul>
<p>You can get both of these with:</p>
<div class="highlight"><pre><code class="bash">gem update flashsdk --pre
</code></pre>
</div><p><span class="attribution"><br />
<image class="bordered" src="/images/3263240819_52c1b7e59b_z.jpg" title="layDeBugger" /><br />
<a href="http://www.flickr.com/photos/ocean_of_stars/3263240819/">layDeBugger</a> courtesy of <a href="http://www.flickr.com/photos/ocean_of_stars/">oceandesetoiles</a> and the <a href="http://creativecommons.org/licenses/by-nc-sa/2.0/">Creative Commons</a> license.<br />
</span></p>
<h2>How do I do what?</h2>
<p>You can coerce any <code>flashplayer</code> task to drop into <span class="caps">FDB</span> by simply calling the <code>fdb</code> task first.</p>
<div class="highlight"><pre><code class="bash">rake fdb <span class="nb">test</span>
</code></pre>
</div><p>This should produce something that approximates the following output:</p>
<div class="highlight"><pre><code class="bash"><span class="o">(</span>in /Users/lbayes/Projects/Sandbox/OtherProject<span class="o">)</span>
mxmlc -debug 
      -library-path+<span class="o">=</span>lib/asunit4/AsUnit-4.2.2.pre.swc 
      -output<span class="o">=</span>bin/OtherProject-test.swf 
      -source-path+<span class="o">=</span><span class="nb">test</span> 
      -static-link-runtime-shared-libraries src/OtherProjectRunner.as

Loading configuration file flex-config.xml
bin/OtherProject-test.swf <span class="o">(</span>49771 bytes<span class="o">)</span>
<span class="o">[</span>MXMLC<span class="o">]</span> Compilation <span class="nb">complete </span>in 3.305054 seconds.
Adobe fdb <span class="o">(</span>Flash Player Debugger<span class="o">)</span> <span class="o">[</span>build 16076<span class="o">]</span>
Copyright <span class="o">(</span>c<span class="o">)</span> 2004-2007 Adobe, Inc. All rights reserved.
Waiting <span class="k">for </span>Player to connect
<span class="o">(</span>fdb<span class="o">)</span> run

Player connected; session starting.
Set breakpoints and <span class="k">then </span><span class="nb">type</span> <span class="s1">&#39;continue&#39;</span> to resume the session.
<span class="o">[</span>SWF<span class="o">]</span> bin:OtherProject-test.swf - 110,886 bytes after decompression
<span class="o">(</span>fdb<span class="o">)</span> 
</code></pre>
</div><p>You should notice that the Flash Player has been initiated, but doesn&#8217;t have focus and is basically unresponsive. At this time, you can interact with <span class="caps">FDB</span> in preparation for the execution of your <span class="caps">SWF</span> file. This is usually the point in time when one might set some breakpoints.</p>
<p>Before we dig into break points, let&#8217;s ask <span class="caps">FDB</span> what else we can do here by typing &#8216;help&#8217; and hitting enter.</p>
<div class="highlight"><pre><code class="bash"><span class="o">(</span>fdb<span class="o">)</span> <span class="nb">help</span>
</code></pre>
</div><p>Typing help, should produce something like the following:</p>
<div class="highlight"><pre><code class="bash">New to fdb? Do <span class="s1">&#39;tutorial&#39;</span> <span class="k">for </span>basic info.
List of fdb commands:
bt <span class="o">(</span>bt<span class="o">)</span>             Print backtrace of all stack frames
<span class="nb">break</span> <span class="o">(</span>b<span class="o">)</span>           Set breakpoint at specified line or <span class="k">function</span>
catch <span class="o">(</span>ca<span class="o">)</span>          Halt when an exception is thrown
cf <span class="o">(</span>cf<span class="o">)</span>             Display the name and number of the current file
clear <span class="o">(</span>cl<span class="o">)</span>          Clear breakpoint at specified line or <span class="k">function</span>
condition <span class="o">(</span>cond<span class="o">)</span>    Apply/remove conditional expression to a breakpoint
<span class="k">continue</span> <span class="o">(</span>c<span class="o">)</span>        Continue execution after stopping at breakpoint
commands <span class="o">(</span>com<span class="o">)</span>      Sets commands to execute when breakpoint hit
delete <span class="o">(</span>d<span class="o">)</span>          Delete breakpoints or auto-display expressions
directory <span class="o">(</span>dir<span class="o">)</span>     Add a directory to the search path <span class="k">for </span><span class="nb">source </span>files
disable <span class="o">(</span>disab<span class="o">)</span>     Disable breakpoints or auto-display expressions
disassemble <span class="o">(</span>disas<span class="o">)</span> Disassemble <span class="nb">source </span>lines or functions
display <span class="o">(</span>disp<span class="o">)</span>      Add an auto-display expressions
<span class="nb">enable</span> <span class="o">(</span>e<span class="o">)</span>          Enable breakpoints or auto-display expressions
file <span class="o">(</span>fil<span class="o">)</span>          Specify application to be debugged.
finish <span class="o">(</span>f<span class="o">)</span>          Execute <span class="k">until </span>current <span class="k">function </span>returns
handle <span class="o">(</span>han<span class="o">)</span>        Specify how to handle a fault
<span class="nb">help</span> <span class="o">(</span>h<span class="o">)</span>            Display <span class="nb">help </span>on fdb commands
home <span class="o">(</span>ho<span class="o">)</span>           Set listing location to where execution is halted
info <span class="o">(</span>i<span class="o">)</span>            Display information about the program being debugged
<span class="nb">kill</span> <span class="o">(</span>k<span class="o">)</span>            Kill execution of program being debugged
list <span class="o">(</span>l<span class="o">)</span>            List specified <span class="k">function </span>or line
next <span class="o">(</span>n<span class="o">)</span>            Step program
print <span class="o">(</span>p<span class="o">)</span>           Print value of variable EXP
<span class="nb">pwd</span> <span class="o">(</span>pw<span class="o">)</span>            Print working directory
quit <span class="o">(</span>q<span class="o">)</span>            Exit fdb
run <span class="o">(</span>r<span class="o">)</span>             Start debugged program
<span class="nb">set</span> <span class="o">(</span>se<span class="o">)</span>            Set the value of a variable
<span class="nb">source</span> <span class="o">(</span>so<span class="o">)</span>         Read fdb commands from a file
step <span class="o">(</span>s<span class="o">)</span>            Step program <span class="k">until </span>it reaches a different <span class="nb">source </span>line
tutorial <span class="o">(</span>t<span class="o">)</span>        Display a tutorial on how to use fdb
undisplay <span class="o">(</span>u<span class="o">)</span>       Remove an auto-display expression
viewswf <span class="o">(</span>v<span class="o">)</span>         Set or clear filter <span class="k">for </span>file listing based on swf
watch <span class="o">(</span>wa<span class="o">)</span>          Add a watchpoint on a given variable
what <span class="o">(</span>wh<span class="o">)</span>           Displays the context of a variable
where <span class="o">(</span>w<span class="o">)</span>           Same as bt
Type <span class="s1">&#39;help&#39;</span> followed by <span class="nb">command </span>name <span class="k">for </span>full documentation.
</code></pre>
</div><p>This is a list of commands (and shortcuts) for interacting with <span class="caps">FDB</span>. If you look closely at the history in your terminal, you should see that Sprouts has already called the <code>run</code> command and then opened your <span class="caps">SWF</span> file. You should also note that you can run the <code>tutorial</code> command any time to get another, slightly more terse introduction to command line debugging.</p>
<p>You can get more specific help on a given command by typing <code>help</code> followed by the command you&#8217;re interested in. Try this now, with the <code>break</code> command:</p>
<div class="highlight"><pre><code class="bash"><span class="o">(</span>fdb<span class="o">)</span> <span class="nb">help break</span>
</code></pre>
</div><p>This should produce something like:</p>
<div class="highlight"><pre><code class="bash">Set breakpoint at specified line or <span class="k">function</span>.
Examples:
  <span class="nb">break </span>87
    Sets a breakpoint at line 87 of the current file.
  <span class="nb">break </span>myapp.mxml:56
    Sets a breakpoint at line 56 of myapp.mxml.
  <span class="nb">break</span> <span class="c">#3:29</span>
    Sets a breakpoint at line 29 of file <span class="c">#3.</span>
  <span class="nb">break </span>doThis
    Sets a breakpoint at <span class="k">function </span>doThis<span class="o">()</span> in the current file.
  <span class="nb">break </span>myapp.mxml:doThat
    Sets a breakpoint at <span class="k">function </span>doThat<span class="o">()</span> in file myapp.mxml.
  <span class="nb">break</span> <span class="c">#3:doOther</span>
    Sets a breakpoint at <span class="k">function </span>doOther<span class="o">()</span> in file <span class="c">#3.</span>
  <span class="nb">break</span>
<span class="nb">   </span>Sets a breakpoint at the current execution address in the
   current stack frame. This is useful <span class="k">for </span>breaking on <span class="k">return</span>
<span class="k">   </span>to a stack frame.
To see file names and numbers, <span class="k">do</span> <span class="s1">&#39;info sources&#39;</span> or <span class="s1">&#39;info files&#39;</span>.
To see <span class="k">function </span>names, <span class="k">do</span> <span class="s1">&#39;info functions&#39;</span>.
Abbreviated file names and <span class="k">function </span>names are accepted <span class="k">if </span>unambiguous.
If line number is specified, <span class="nb">break </span>at start of code <span class="k">for </span>that line.
If <span class="k">function </span>is specified, <span class="nb">break </span>at start of code <span class="k">for </span>that <span class="k">function</span>.
See <span class="s1">&#39;commands&#39;</span> and <span class="s1">&#39;condition&#39;</span> <span class="k">for </span>further breakpoint control.
</code></pre>
</div><p>We can see from this help content, that there are a variety of ways that we might set a breakpoint. My project was created with the <code>sprout-as3</code> command and was called <code>OtherProject</code>, which means that I have a test runner called <code>OtherProjectRunner</code>. I&#8217;m going to set a break point in that file now with:</p>
<div class="highlight"><pre><code class="bash"><span class="o">(</span>fdb<span class="o">)</span> <span class="nb">break </span>OtherProjectRunner:15
</code></pre>
</div><p>And then I&#8217;m going to <code>continue</code> execution of the <span class="caps">SWF</span> until the breakpoint is encountered.</p>
<div class="highlight"><pre><code class="bash"><span class="o">(</span>fdb<span class="o">)</span> <span class="k">continue</span>
</code></pre>
</div><p><em>(If you remember the help content, this can also be done by simply typing <code>c</code> followed by the enter key)</em></p>
<p>The <span class="caps">SWF</span> will execute until it encounters the breakpoint that I set and once the breakpoint is hit, <span class="caps">FDB</span> will emit some context information like:</p>
<div class="highlight"><pre><code class="bash">Breakpoint 1, OtherProjectRunner<span class="o">()</span> at OtherProjectRunner.as:15
 15                core.start<span class="o">(</span>AllTests, null, this<span class="o">)</span>;
<span class="o">(</span>fdb<span class="o">)</span> 
</code></pre>
</div><p>Following are some of the things I might do here:</p>
<ul>
	<li>Introspect the running <span class="caps">SWF</span> file with the <code>info</code> commands (type <code>info</code> to see these options)</li>
	<li>Set variables and values directly into the environment to see what happens using the <code>set</code> command</li>
	<li>Step through the <span class="caps">SWF</span>, one line or function at a time using the <code>step</code> command, followed by <code>list</code> or <code>i s</code> (info stack).</li>
</ul>
<p>When you&#8217;re done, you can type the <code>quit</code> command, or you can <code>continue</code> past your breakpoints and then manually close the <span class="caps">SWF</span>. Or you can just hit CTRL+C to kill the process &#8211; which should clean everything up for you.</p>
<p>Upcoming releases of Sprouts will combine a special test result printer, with the <span class="caps">FDB</span> task to figure out when your test harness has finished running and then automatically kill the Flash Player process.</p>
<p>This should be enough to get you going with the Flex DeBugger in your Sprout projects.</p>
<h2>Conclusion</h2>
<p>This brings us to the end of the &#8220;Using the Flex DeBugger (<span class="caps">FDB</span>)&#8221; post. If you find anything here in error, <a target="_blank" href="http://groups.google.com/group/projectsprouts">please let us know</a>, or better yet &#8211; <a target="_blank" href="https://github.com/lukebayes/project-sprouts/blob/gh-pages/_source/_posts">fork</a>, fix and send a pull request.</p>
  </div>
</div>

<div class="center even-section">
  <div class="content header-shadow">

    <div id="disqus_thread"></div>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

  </div>
</div>


  <div id="footer">
    <div class="center">
      <div class="content header-shadow">

        <table>

          <tr>
            <td>

              <ul>
                <li class="header">Details</li>
                <li class="home"><a href="/">Home</a></li>
                <li class="troubleshooting"><a href="/troubleshooting.html">Troubleshooting</a></li>
                <li class="migrating"><a href="/2010/12/29/migrating.html">Migration Guide</a></li>

                <li class="current-docs"><a href="/docs/1.1/frames.html">Docs (1.1 &mdash; Frames)</a></li>
                <li><a href="/docs/1.1/index.html">Docs (1.1 &mdash; No Frames)</a></li>

                <li class="legacy-docs"><a href="/rdoc/index.html">Legacy Docs (0.7)</a></li>
                <li class="legacy-site"><a href="/legacy/index.html">Legacy Site (0.7)</a></li>
              </ul>

            </td>
            <td>

              <ul>
                <li class="header">Blog <a href="/atom.xml"><img class="footer-feed-icon" src="/images/35px-Feed-icon.png" /></a></li>
                
                <li class="post"><a href="/2011/01/20/introduction-to-ruby.html"><span class="date">2011-01-20</span> | Introducing Ruby to ActionScripters</a></li>
                
                <li class="post"><a href="/2011/01/19/using-fdb.html"><span class="date">2011-01-19</span> | Using the Flex DeBugger (FDB)</a></li>
                
                <li class="post"><a href="/2011/01/18/using-fcsh.html"><span class="date">2011-01-18</span> | Using the Flex Compiler SHell (FCSH)</a></li>
                
                <li class="post"><a href="/2010/12/31/using-generators.html"><span class="date">2010-12-31</span> | Using Sprout Generators</a></li>
                
                <li class="post"><a href="/2010/12/29/migrating.html"><span class="date">2010-12-29</span> | Migrating from 0.7 to 1.0 beta</a></li>
                
                <li class="post"><a href="/2010/12/28/version-1.0-announced.html"><span class="date">2010-12-28</span> | Project Sprouts Version 1.0 Beta Released!</a></li>
                
              </ul>

            </td>
            <td>

              <ul>
                <li class="header">Do It</li>
                <li><a target="_blank" href="http://groups.google.com/group/projectsprouts">Contact</a> (Google Groups)</li>
                <li><a target="_blank" href="https://github.com/lukebayes/project-sprouts/tree/master">Source Code</a> (Github)</li>
                <li><a target="_blank" href="https://github.com/lukebayes/project-sprouts/issues">File an Issue</a> (Github)</li>
                <li><a target="_blank" href="http://rubygems.org/gems/sprout">Download</a> (RubyGems)</li>
                <li><a target="_blank" href="http://projectsprouts.org/docs/1.1/frames.html">Documentation</a> 
                (<a target="_blank" href="http://projectsprouts.org/docs/1.1/index.html">No Frames</a>)</li>
              </ul>

            </td>

          </tr>

        </table>

      </div>
    </div>
  </div>
</body>

<!-- Google Analytics for projectsprouts.org -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1619511-4");
pageTracker._initData();
pageTracker._trackPageview();
</script>


<!-- Disquss -->
<script type="text/javascript">
    //var disqus_developer = 1;
    var disqus_shortname = 'projectsprouts';
    var disqus_title     = 'Using the Flex DeBugger (FDB)'
    var disqus_url       = 'http://projectsprouts.org/2011/01/19/using-fdb.html';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>


</html>

